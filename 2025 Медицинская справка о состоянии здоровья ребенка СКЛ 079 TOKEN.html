<!-- Медицинская справка о состоянии здоровья ребенка -->
<!--Начальная дата разработки 07.07.2025 г.-->
<!--Разработка: Пулин -->
<!--Контекст печати:  -->
<!--Задача: DEV_TEMP-5574 Медицинская справка о состоянии здоровья ребенка, направляемого  в организацию отдыха детей и их оздоровления -->

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Медицинская справка о состоянии здоровья ребенка, направляемого в организацию отдыха детей и их оздоровления</title>
<!-- @formatter:off -->
{: setPageSize('A4')}
{: setOrientation('P')}
{: setTopMargin(5)}
{: setBottomMargin(5)}
{: setRightMargin(17)}
{: setLeftMargin(17)}

{: from library.Utils import forceString }
{: from library.Utils import forceInt }
{: from PyQt4 import QtGui }
{: db = QtGui.qApp.db }

{: month = [u'a', u'января', u'февраля', u'марта', u'апрель', u'мая', u'июня', u'июля', u'августа', u'сентября', u'октября', u'ноября', u'декабря']}

{:
write('''
<style>
.h1 {
    text-align: center;
    margin-bottom: 10px;
    font-size: 12pt;
    font-weight: 900;
}
.main {
    font-family: 'Times New Roman';
    font-size: 10pt;
}
.small {
  font-size: 8pt;
}
.xs {
    font-size: 6pt;
}

.bold {
  font-weight: 900;
}

.white-wrap {
  white-space: nowrap;
}
</style>
''')}

{:
def render_line(str, base_length = 100):
  return u'_' * (base_length - len(str))
}

<!-- @formatter:on -->
</head>
<body>

<div class="main">

  <header class="header">
    <table width="100%" cellpadding="0" cellspacing="0">
      <tr>
        <td width="1%" valign="top">
          <div class="white-wrap xs">
            Наименование и адрес медицинской организации <br>
            (фамилия, имя, отчество (при наличии) индивидуального предпринимателя и адрес осуществления медицинской деятельности)
          </div>
          <div>
            {currentOrganisation.title}
          </div>
          <div class="white-wrap xs">
            Основной государственный регистрационный номер (Основной государственный регистрационный <br>
            номер индивидуального предпринимателя)
          </div>
        </td>
        <td width="98%"></td>
        <td width="1%" valign="top" class="small">
          <div class="white-wrap">Медицинская документация</div>
          <div class="white-wrap">Учетная форма № 079/у</div>
          <div class="white-wrap">Утверждена приказом Министерства <br> здравоохранения Российской Федерации</div>
          <div class="white-wrap">от 13 мая 2025 г. № 274н</div>
        </td>
      </tr>
    </table>
  </header>

  <br>

  <div align="center" class="h1">
    Медицинская справка о состоянии здоровья ребенка, направляемого <br>
    в организацию отдыха детей и их оздоровления
  </div>

  <div>
    Фамилия, имя, отчество (при наличии) ребенка <b>{client.fullName}</b>
  </div>

  <div>
    Дата рождения:
    <b>«{forceString(client.birthDate.toString('dd'))}» {forceString(month[client.birthDate.date.month()])} {forceString(client.birthDate.date.year())} г.</b>
    Пол: <span class="xs">муж. – 1, жен. – 2</span>  <b>{1 if client.sex == u'М' else 2}</b>
    Гражданство: <b>{client.citizenship}</b>
  </div>

<!-- note Регистрация по месту -->
{:
def check_city(city):
  return (city and city.socr and (city.socr.strip() == "г." or city.socr.strip() == "г"))
}

{:
def get_district(district):
  if district:
    dst = district.strip()
    if dst.endswith('р-н'):
      return dst[:-3]
    elif dst.endswith('р-н.'):
      return dst[:-4]
  return None
}

<div>
  Регистрация по месту жительства: субъект Российской Федерации <b>{client.regAddress.region.name}</b>
</div>
<div>
  {: isToRenderAddrString = True}
  <div>
    {: dst = get_district(client.regAddress.district)}
    {if: dst} район <b>{dst}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {: isToRenderAddrString = False} {end:}
    {if: check_city(client.regAddress.parentCity)} город <b>{client.regAddress.parentCity.name}</b> {: isToRenderAddrString = False}{end:}
    {if: client.regAddress.city}населенный пункт <b>{client.regAddress.city.name}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {: isToRenderAddrString = False}{end:}
  </div>

  <div>
    {if: client.regAddress.street} улица <b>{client.regAddress.street.name}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {: isToRenderAddrString = False}{end:}
    {if: client.regAddress.number} дом <b>{client.regAddress.number}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {: isToRenderAddrString = False}{end:}
    {if: client.regAddress.flat} квартира <b>{client.regAddress.flat}</b> {: isToRenderAddrString = False}{end:}
  </div>

  <!-- note на случай, если адрес введен в виде строки, а не с использованием КЛАДР -->
  {if: isToRenderAddrString}
      <b>{client.regAddress}</b>
  {end:}
</div>

<div>
  Регистрация по месту пребывания: субъект Российской Федерации <b>{client.locAddress.region}</b>
</div>
<div>
  {: isToRenderAddrString = True}
  <div>
    {: dst = get_district(client.locAddress.district)}
    {if: dst} район <b>{dst}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {: isToRenderAddrString = False} {end:}
    {if: check_city(client.locAddress.parentCity)} город <b>{client.locAddress.parentCity.name}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  {: isToRenderAddrString = False}{end:}
    {if: client.locAddress.city}населенный пункт <b>{client.locAddress.city.name}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {: isToRenderAddrString = False}{end:}
  </div>

  <div>
    {if: client.locAddress.street} улица <b>{client.locAddress.street.name}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {: isToRenderAddrString = False}{end:}
    {if: client.locAddress.number} дом <b>{client.locAddress.number}</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {: isToRenderAddrString = False}{end:}
    {if: client.locAddress.flat} квартира <b>{client.locAddress.flat}</b> {: isToRenderAddrString = False}{end:}
  </div>
  {if: isToRenderAddrString}
      <b>{client.locAddress}</b>
  {end:}
</div>
<!-- note END Регистрация по месту -->

  <div>
    Сведения об образовательной организации:
    тип {'_' * 10}
    № {'_' * 10}
    класс {'_' * 10}
  </div>
  <div>наименование {'_' * 20}</div>

  <div>
    <div>
      Перенесенные заболевания, операции, травмы
      {render_line(u'Перенесенные заболевания, операции, травмы')}
    </div>
  </div>


  <div>
    Проведенные профилактические прививки и результаты обследований, в том числе в целях выявления туберкулеза
    {render_line(u'Проведенные профилактические прививки и результаты обследований, в том числе в целях выявления туберкулеза', 200)}
  </div>

  <div>
    Состояние здоровья:
    {render_line(u'Состояние здоровья:')}
  </div>

  <div>
    Диагноз заболевания
    {'_' * 16}
    код по МКБ
    {'_' * 16}
  </div>

  <div>
    Аллергические заболевания (пищевая, лекарственная, бытовая аллергия), аллергические реакции:
    {render_line(u'Аллергические заболевания (пищевая, лекарственная, бытовая аллергия), аллергические реакции:')}
  </div>

  <div align="justify">
    Назначенный лечащим врачом режим лечения (диета, прием лекарственных препаратов для медицинского применения и специализированных продуктов лечебного питания)
    {render_line(u'Назначенный лечащим врачом режим лечения (диета, прием лекарственных препаратов для медицинского применения и специализированных продуктов лечебного питания)', 200)}
  </div>

  <div>
    Рост {'_' * 16}
    масса тела {'_' * 16}
  </div>

  <div>
    Группа здоровья
    {render_line(u'Группа здоровья')}
  </div>

  <div>
    Медицинская группа для занятий физической культурой
    {render_line(u'Медицинская группа для занятий физической культурой')}
  </div>

  <div>
    Нуждаемость в условиях доступной среды:
    {render_line(u'Нуждаемость в условиях доступной среды:')}
  </div>

  <div align="justify">
    Необходимость сопровождения ребенка законным представителем в период пребывания в организации отдыха детей и их оздоровления и (или) нуждающегося в индивидуальной помощи в связи с имеющимися физическими, психическими, интеллектуальными или сенсорными нарушениями
    {render_line(u'Необходимость сопровождения ребенка законным представителем в период пребывания в организации отдыха детей и их оздоровления и (или) нуждающегося в индивидуальной помощи в связи с имеющимися физическими, психическими, интеллектуальными или сенсорными нарушениями')}
  </div>

  <div>
    Отсутствие контакта с больными инфекционными заболеваниями
    {render_line(u'Отсутствие контакта с больными инфекционными заболеваниями')}
  </div>

  <div>
    Осмотр на педикулез и чесотку
    {render_line(u'Осмотр на педикулез и чесотку')}
  </div>

  <div>
    Обследование на гельминтозы (энтеробиоз, гименолепидоз)
    {render_line(u'Обследование на гельминтозы (энтеробиоз, гименолепидоз)')}
  </div>

  <div>
    Отсутствие медицинских противопоказаний для пребывания в организации отдыха детей и их оздоровления
    {render_line(u'Отсутствие медицинских противопоказаний для пребывания в организации отдыха детей и их оздоровления')}
  </div>

  <div align="justify">Должность, специальность, фамилия, имя, отчество (при наличии) и подпись врача</div>
  <div class="bold">
    {render_line(u'')}
  </div>

  <div align="justify">Фамилия, имя, отчество (при наличии) и подпись руководителя медицинской организации</div>
  <div>{render_line(u'')}</div>

  <br>

  <div>М.П. (при наличии)</div>
  <div>«____» ______ 20____г.</div>

</div>
</body>
</html>
