<!-- изменил Пулин дата 21.04.2025 задача DEV_TEMP-5365 Изменить печать из А4 на А5 -->
<!-- изменил Пулин дата 21.08.2024 задача DEV_TEMP-3801 Настроить печать шаблона дневника -->
<!--Начальная дата разработки 15.02.2024 г.-->
<!--Разработка: Пулин Тимур -->
<!--Контекст печати: osm_ter -->
<!--Задача: DEV_TEMP-3441 Создать новые дневники для терапевта -->
<!-- NOTE для печати "Первичный прием" и "Повторный прием"  -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Первичный прием</title>
<!-- @formatter:-off -->

{:
write('''
<style>
.h1 {
    text-align: center;
    margin-bottom: 20px;
    font-size: 14pt;
    font-weight: 900;
}
body {
    font-family: 'Times New Roman';
    font-size: 12pt;
}
</style>
''')}




{: setPageSize('A5')}
{: setOrientation('P')}
{: setTopMargin(5)}
{: setBottomMargin(5)}
{: setRightMargin(17)}
{: setLeftMargin(17)}

{: from library.Utils import forceString }
{: from library.Utils import forceInt }
{: from PyQt4 import QtGui }
{: db = QtGui.qApp.db }

{: month = [u'a', u'января', u'февраля', u'марта', u'апрель', u'мая', u'июня', u'июля', u'августа', u'сентября', u'октября', u'ноября', u'декабря']}
{: attendNameList = [u'повторная явка на прием', u'ЭЛНС', u'явка']}


{:
stringPropsNameList = [u'Аллергологический анамнез', u'Страховой анамнез', u'ЭЛНС', u'явка', u'Повторная явка на прием']
}
<!-- @formatter:-on -->
</head>
<body>
<h2>test</h2>
<div align="center" class="h1">{forceString(action.name).split(' ', 1)[0]} прием</div>
<br>
<div><b>Пациент:</b> {client.fullName}</div>

<br>

{for: prop in action}
    {if: prop.value}
      {if: prop.name not in stringPropsNameList}
        {: elemList = []}
        {for: elem in prop.value.split(';') }
          {:elemList.append(elem)}
        {end:}
        <div><b>{prop.name}:</b> {', '.join(elemList)}</div>
      {else:}
        <div><b>{prop.name}:</b> {prop.value:n}</div>
      {end:}
    {end:}
{end:}


<table style="margin-top:20px">
    <tr>
    <td>{currentDate}</td>
    <td style="padding:20px"></td>
    <td width="1%" align="center">
      <div>{'_' * 15}</div>
      <div><sup>(подпись)</sup></div>
    </td>
    <td style="padding:20px"></td>
    <td style="white-space:nowrap" align="center">
      <div>{currentPerson.fullName}</div>
      <div><sup>(Ф.И.О. медицинского работника)</sup></div>
    </td>
  </tr>
</table>
</body>
</html>


